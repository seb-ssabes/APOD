<div class="h-screen flex flex-col bg-gray-50" data-controller="zoom">
  <header class="flex-none text-center mt-6">
    <h1 class="font-bold text-4xl mb-1">Astronomy Picture of the Day</h1>
    <h2 class="font-bold text-xl text-gray-400">By NASA</h2>
  </header>

  <div class="flex-grow flex items-center justify-center">

    <div class="flex items-stretch ml-3 w-1/2 group relative">

      <a href="<%= apod_date_path((@apod_data['date'].to_date - 1).to_s) %>"
        class="flex items-center justify-center hover:text-gray-500 hover:bg-white border
             border-gray-200 rounded-lg bg-gray-300 text-gray-700 w-12
               opacity-0 group-hover:opacity-100 transition-opacity duration-300"
        aria-label="Previous">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
      </a>

      <div class="w-auto aspect-video overflow-hidden rounded-md shadow-sm mx-4" data-action="click->zoom#open">
        <% if @apod_data['url'].include?("youtube") %>
          <iframe
            class="w-full h-full"
            src="<%= @apod_data['url'] %>"
            allowfullscreen>
          </iframe>
        <% else %>
          <img
            class="object-cover w-full h-full"
            src="<%= @apod_data['url'] %>"
            alt="APOD Image"
            data-zoom-target="image">
        <% end %>
      </div>

      <% if @apod_data['date'].to_date < Date.today %>
        <a href="<%= apod_date_path((@apod_data['date'].to_date + 1).to_s) %>"
          class="flex items-center justify-center hover:text-gray-500 hover:bg-white border
             border-gray-200 rounded-lg bg-gray-300 text-gray-700 w-12
               opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          aria-label="Next">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      <% end %>
    </div>

    <div class="w-1/2 text-left">
      <h1 class="font-bold text-3xl mb-2 text-center"><%= @apod_data['title'] %></h1>
      <p class="text-sm text-gray-500 mb-4 text-center"><%= @apod_data['date'] %></p>

      <div class="px-8">
        <%= @apod_data['explanation'] %>
        <% if @apod_data['copyright'].present? %>
          <% if @apod_data['copyright'].include?(",") %>
            <div class="font-bold text-lg text-gray-500 mb-4">
              <i class="fa-regular fa-copyright text-sm"></i>
              <%= @apod_data['copyright'] %>
            </div>
          <% else %>
            <div data-controller="typed"
                data-typed-strings-value='["<%= j @apod_data['copyright'] %>"]'
                data-typed-initialized="false"
                class="font-bold text-lg text-gray-500 mb-4">
              <i class="fa-regular fa-copyright text-sm"></i>
              <span data-typed-target="output"></span>
            </div>
          <% end %>
        <% end %>
      </div>



    </div>

  </div>


  <footer class="flex-none py-4">
    <nav class="container mx-auto flex justify-center">
      <ul class="flex gap-4">
        <li>
          <%= link_to archives_path, class:"btn ml-3" do %>
            <i class="fa-regular fa-folder-open text-2xl"></i>
          <% end %>
        </li>
        <li>
          <%= link_to search_path, class:"btn ml-3" do %>
            <i class="fa-brands fa-searchengin text-2xl"></i>
          <% end %>
        </li>
        <li>
          <%= link_to root_path, class:"btn ml-3", data: {action: "click->zoom#open"} do %>
            <i class="fa-solid fa-expand text-2xl"></i>
          <% end %>
        </li>
        <li>
          <%= link_to root_path, class:"btn ml-3" do %>
            <i class="fa-solid fa-circle-info text-2xl"></i>
          <% end %>
        </li>

      </ul>
    </nav>
  </footer>

  <div data-zoom-target="modal"
      data-action="click->zoom#close"
      class="fixed inset-0 bg-black bg-opacity-85 backdrop-blur-md items-center justify-center hidden">
    <div class="relative">
      <img
        class="w-auto h-auto max-w-[calc(100vw-4rem)] max-h-[calc(100vh-4rem)] object-contain"
        src="<%= @apod_data['url'] %>"
        data-zoom-target="zoomedImage">
    </div>
  </div>
</div>
